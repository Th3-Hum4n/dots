#!/bin/sh

cd ${HOME}
export PATH=${HOME}/etc/xorg.d/${WM}.d/bin:${HOME}/etc/xorg.d/bin:${PATH}

export XFONT='monospace:pixelsize=12:hinting=true:rgba=none'
export TERMINAL='tabbed -r 2 st -w ""'

remkd /tmp/info /tmp/info/vol

[ -f /tmp/sxhkdrc ] && rm /tmp/sxhkdrc

setxkbmap -option caps:swapescape           &
sxhkd -c ${HOME}/etc/xorg.d/sxhkdrc         \
         ${HOME}/etc/xorg.d/${WM}.d/sxhkdrc &
. ${XDG_CACHE_HOME}/wall                    &
doas ${HOME}/bin/brness -s 6                &
! pgrep -x emacs 2>/dev/null &&
    emacs --daemon &

[ ${WM} = 'wchf' ] && {
    popcfs &
    clbors &
}

exec ${WM}
