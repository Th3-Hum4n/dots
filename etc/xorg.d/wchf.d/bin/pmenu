#!/bin/sh

read -r BPX  < /tmp/info/wm/borders/size
read -r BCOL < /tmp/info/wm/borders/selcol
read -r FG   < /tmp/info/wm/colors/normfg
read -r BG   < /tmp/info/wm/colors/normbg

resize() {
    id=`slw`
    set -- `crud`

    xdotool windowsize ${id} ${3} ${4}
    xdotool windowmove ${id} ${1} ${2}
}

new() {
    draw_st
}

delete() {
    id=`slw`
    xdotool windowclose ${id}
}

hide() {
    id=`slw`
    [ ! -d /tmp/info/wm/misc ] && mkdir -p /tmp/info/wm/misc
    xdotool windowunmap ${id}
    [ ${?} -eq 0 ] && echo ${id} >> /tmp/info/wm/misc/hidden
}

unhide() {
    id=`while read -r i; do
             echo "${i} xdotool getwindowname ${i}"
         done < /tmp/info/wm/misc/hidden | menu sel`
    id=${id%% *}
    xdotool windowmap ${id}
    sed -i "/${id}/d" /tmp/info/wm/misc/hidden
}

focus() { wmenu; }

`xmenu -f "0x${FG#\#}"                \
      -b "0x${BG#\#}"                 \
      -F "${XFONT}"                   \
      'new' 'resize' 'delete' 'hide'  \
      'unhide' 'focus' 'exit'`
