#!/bin/sh
# screenshot utility using xscreenshot (custom) and 0x0.st

tmp_image='/tmp/grab.png'

case `echo 'grab area\ngrab window\ngrab screen' | menu sel` in
(*area*)
    xscreenshot -g `hacksaw -n`
    ;;
(*win*)
    xscreenshot -w `xdotool getactivewindow`
    ;;
(*screen*)
    xscreenshot
    ;;
(*)
    exit
    ;;
esac | ff2png > ${tmp_image}

case ${1} in
(-u)
    curl -F file=@${tmp_image} https://0x0.st | \
        head -n 1                             | \
        tr -d '\n'                            | \
        xin
    notify-send 'scrot taken! url in clipboard'
    ;;
(*)
    xclip -sel clipboard -t image/png -i ${tmp_image}
    cp ${tmp_image} \
       ${HOME}/var/pictures/scrots/scrot_$(date '+%b_%d-%H:%M').png
    notify-send 'scrot taken! picture stored in drive'
    ;;
esac

rm -rf ${tmp_image}
