#!/bin/sh
# a battery thingy

[ ! -e ${XDG_CACHE_HOME}/bat ] && {
	base_dir='/sys/class/power_supply'

	for i in 0 1 2 3; do
		[ -d "${base_dir}/BAT${i}" ] && {
			base_dir="${base_dir}/BAT${i}"
			break
		}
	done
	echo ${base_dir} >${XDG_CACHE_HOME}/bat
}

[ -z ${base_dir} ] && read -r base_dir <${XDG_CACHE_HOME}/bat

case ${1} in
(-s) cat ${base_dir}/status   ;;
(*)  cat ${base_dir}/capacity ;;
esac
