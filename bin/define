#!/usr/bin/python3
import urllib.request, urllib.error
import json
import sys
import argparse

def request_data(word):
    url = "https://www.dictionaryapi.com/api/v3/references/thesaurus/json/" +\
          f"{word}?key=1140c060-67e7-4314-9843-b6cfbb21121c"
    try:
        data = urllib.request.urlopen(url).read()
        data = json.loads(data)
        return data
    except:
        return


def synonyms(data):
    for i in data:
        fl = i.get("fl")
        synonyms_list = i.get("meta").get("syns")[0]
        synonyms_str = ""
        for j in synonyms_list:
            synonyms_str += f"{j}\n"

        print(f"{fl}:\n{synonyms_str}")

def shortdef(data):
    for i in data:
        fl = i.get("fl")
        shortdef_list = i.get("shortdef")
        shortdef_str = ""
        for j in shortdef_list:
            shortdef_str += f"{j}\n"

        print(f"{fl}:\n{shortdef_str}")


parser = argparse.ArgumentParser()
parser.add_argument("-s", "--synonym", help="get the synonym of words",
                    metavar="word1 word2", nargs="+")
parser.add_argument("-d", "--definition", help="get the definition of words",
                    metavar="word1 word2", nargs="+")
args = parser.parse_args()

if not sys.argv[1:]:
    parser.print_help()
    exit(1)

if args.synonym:
    synonym_list = args.synonym
    for i in synonym_list:
        data = request_data(i)
        synonyms(data)
if args.definition:
    words = args.definition
    for i in words:
        data = request_data(i)
        shortdef(data)
