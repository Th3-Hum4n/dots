#!/bin/dash
# simple bash script which increases the volume of Master (ALSA)

usage() {
    echo "help\n----------\n[-h] echo this message\n[-i] increase volume by percent"
    echo "[-d] decrease volume by percent\n[-s] set volume in percent\n[-m] mute speakers\n[-u] unmute the speakers"
}

inc() {
    amixer set Master $1+
}

dec() {
    amixer set Master $1-
}

setvol() {
    amixer set Master $1
}

mute() {
    amixer set Master mute
}

unmute() {
    amixer set Master unmute
}

case $1 in
    -h) usage;;
    -i) inc $2;;
    -d) dec $2;;
    -m) mute;;
    -u) unmute;;
    -s) setvol $2;;
    *) usage;;
esac

# get current volume and output that to a file which will be used by the bar
amixer sget Master | grep 'Right:' | awk -F '[][]' '{ print $2 }' > /tmp/bar/vol
