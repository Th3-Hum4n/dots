#!/bin/sh
# script to get memory usage
# TODO: add cpu usage

get_mem() {
    local mem="$(free -m | grep Mem)"
    local total=`echo ${mem} | awk -F' ' '{print $2}'`
    local used=`echo ${mem} | awk -F' ' '{print $3}'`

    # do math to get percentage
    local percent=$((used * 100 / total))
    echo ${percent}
}

get_cpu() {
    local cpu="$(grep 'cpu ' /proc/stat)"
    local used=`echo "${cpu}" | awk '{print $2+$4}'`
    local total=`echo "${cpu}" | awk '{print $2+$4+$5}'`

    local percent=$((used * 100 / total))
    echo ${percent}
}

while [ ${#} -gt 0 ]; do
    case ${1} in
    (-m|-r) get_mem;;
    (-c) get_cpu;;
    esac
    shift
done
